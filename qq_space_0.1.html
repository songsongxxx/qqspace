<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>0.01</title>
    <link rel="stylesheet" href="qq_space_0.1.css">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
    <!-- Âä†ËΩΩ PDF.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>

    <style>

    </style>
</head>

<body>
    <div class="chat-sidebar">
        <h2>(ÃÅÏàú‚óû‡±™‚óüÏàú‚Äµ)</h2>
        <div class="sidebar-inner">
            <div id="friendList"></div>
        </div>
    </div>

    <div id="storyModal" class="story-modal hidden">
        <div class="story-content"></div>
        <button onclick="closeModal()">Close</button>
    </div>

    <div class="poem-section">
        <h1 class="tooltip" data-tooltip="Êó†Ê≥ïË¢´ÂëΩÂêç‰πãÁâ©ÁöÑÂ°ëÂΩ¢ÊåáÂçó">A guide for sculpting what cannot be named</h1>
        <div class="typing-container">
            <p>
                <span class="tooltip" data-tooltip="ÂÆû‰ΩìÁºñÂè∑">Entity_qq_space#:</span><input id="b1" /> <br /><br />

                <span class="tooltip" data-tooltip="ËøôÊòØ‰∏Ä‰∏™‚Ä¶‚Ä¶ÁöÑ‰∏ñÁïå">This is a world of</span> <input id="b2" />.<br />
                <span class="tooltip" data-tooltip="‰∏çÊòØÂõ†‰∏∫ÂÆÉ‰ª¨‰∏çÂèØËßÅ">not because they are invisible,</span><br />
                <span class="tooltip" data-tooltip="ËÄåÊòØÂõ†‰∏∫ËΩÆÂªìÁöÑÊÑèÂõæ‰ªé‰∏çÂõ∫ÂÆö">but because the intention of contour is never
                    fixed‚Äî</span><br />
                <span class="tooltip" data-tooltip="ÂÆÉÊªëÂä®„ÄÅËΩØÂåñÔºåÂú®Êó∂Èó¥ÁöÑË§∂Áö±‰∏≠ÊóãËΩ¨„ÄÇ">it slips, softens, and spins within the folds of
                    time.</span><br /><br />

                <span class="tooltip" data-tooltip="ÂÆÉ‰ª¨ÁöÑÂΩ¢‰ΩìÔºå">Their bodies feel like sensations,</span><br />
                <span class="tooltip" data-tooltip="ÂÉè‰∏ÄÊÆµÂÖ≥‰∫é‚ÄúÂΩ¢Áä∂ÊõæÁªèÂ≠òÂú®‚ÄùÁöÑËÆ∞ÂøÜ„ÄÇ">or the memory of a form that may have once
                    existed.</span><br />
                <span class="tooltip" data-tooltip="Âú®ÊàøÈó¥ÁöÑËßíËêΩÈáåÔºå">In the corner of a room,</span><br />
                <span class="tooltip" data-tooltip="Âú®Ë¢´ÈÅóÂøòÁöÑÂ∞òÂüÉÁºùÈöô‰∏≠ÔºåÔºå">in the gaps between forgotten dust,</span><br />
                <span class="tooltip" data-tooltip="ÊüêÁßç‰∏úË•øÊ≠£Âú®Ë†ïÂä®„ÄÇ">something begins to stir.</span><br /><br />

                <span class="tooltip" data-tooltip="‰∏ÄÁßçÔºàÂêçËØçÔºâ">A (noun)</span> <input id="b3" /> <span class="tooltip" data-tooltip="‰∏çË¢´ËÆ∞‰ΩèÁöÑ‚Ä¶‚Ä¶Ê≠£Âú®ÁºìÊÖ¢ÁîüÊàê">that cannot be remembered is slowly forming.</span><br />
                <span class="tooltip" data-tooltip="‰Ω†‰ªé‰∏Ä‰∏™Ëá™‰ª•‰∏∫ÁÜüÊÇâÁöÑËµ∑ÁÇπÂºÄÂßãÔºö">You begin from what you believe is familiar:</span>
                <span class="tooltip" data-tooltip="‰πüËÆ∏ÊòØ‰∏ÄÁßçÁî±‚Ä¶‚Ä¶ÊûÑÊàêÁöÑÁªìÊûÑ">perhaps a structure made of</span> <input
                    id="b4" />,<br />
                <span class="tooltip" data-tooltip="ÂÆÉÂèØËÉΩ‰ºö‚Ä¶‚Ä¶Ôºå‰πüÂèØËÉΩ‰ºö‚Ä¶‚Ä¶">it may</span> <input id="b5" />, <span class="tooltip" data-tooltip="‰πüÂèØËÉΩ‰ºö">or it may also</span> <input id="b6" />.<br /><br />

                <span class="tooltip" data-tooltip="ÂÆÉÁöÑË°®Èù¢‰ªø‰Ωõ‚Ä¶‚Ä¶">Its surface resembles</span> <input id="b7" />, <br />
                <span class="tooltip" data-tooltip="Âú®Êó∂Èó¥‰∏≠‰∏çÊñ≠‚Ä¶‚Ä¶">and through time, it continues to</span> <input
                    id="b8" />.<br /><br />

                <span class="tooltip" data-tooltip="‰ΩÜÂæàÂø´ÔºåÂÆÉ‰ºöË∂äÂá∫‰Ω†ÁöÑÁêÜËß£Ôºö">But soon, it will move beyond your
                    understanding‚Äî</span><br />
                <span class="tooltip" data-tooltip="ÂÆÉÂèØËÉΩ‰ºöÂàÜË£Ç‰∏∫Âè¶‰∏Ä‰∏™Ëá™Â∑±Ôºå">it might split into another version of
                    itself,</span><br />
                <span class="tooltip" data-tooltip="ÊàñÂ°åÈô∑ÊàêÊó†Êï∞Ë§∂Â±ÇÔºå">or collapse into endless folds,</span><br />
                <span class="tooltip" data-tooltip="Êàñ‰ªéÂÜÖÈÉ®ÂèëÂá∫Êó†Â£∞ÁöÑÂõûÈü≥„ÄÇ">or emit an echo from within, though no sound can be
                    heard.</span><br /><br />

                <span class="tooltip" data-tooltip="ÂÆÉ‰∏çÊòØ‰∏∫‰∫ÜÁîüÂ≠òÔºå">It does not exist in order to survive,</span><br />
                <span class="tooltip" data-tooltip="ËÄåÊòØ‰∏∫‰∫Ü‚Ä¶‚Ä¶ËÄåÂ≠òÂú®">but to</span> <input id="b9" />.<br />
            </p>
            <button class="submit-button" onclick="submitPoem()">Submit</button>
        </div>


        <!-- ÊâìÂºÄ PDF ÁöÑÂõæÊ†áÊåâÈíÆ -->
        <img id="openPdfIcon" src="book.png" alt="ÊâìÂºÄ PDF" title="ÁÇπÊàëÊâìÂºÄ PDF" />


        <!-- PDF ÂºπÂá∫ÂÆπÂô® -->
        <div id="pdfModal">
            <button id="closePdf">Close ‚úñ</button>
            <canvas id="pdfCanvas"></canvas>
            <div class="pdf-controls">
                <button id="prevPage">‚óÄ Prev</button>
                <span id="pageNum">1</span> / <span id="pageCount">?</span>
                <button id="nextPage">Next ‚ñ∂</button>
            </div>
        </div>
    </div>


    <script>

        function submitPoem() {

            console.log("üöÄ ÂáÜÂ§áÂèëÈÄÅÊï∞ÊçÆÔºÅ");

            const formData = new FormData();
            formData.append('entry.1337640561', document.getElementById('b1').value);
            formData.append('entry.92386776', document.getElementById('b2').value);
            formData.append('entry.1122794289', document.getElementById('b3').value);
            formData.append('entry.895074014', document.getElementById('b4').value);
            formData.append('entry.1429670293', document.getElementById('b5').value);
            formData.append('entry.597940394', document.getElementById('b6').value);
            formData.append('entry.1337463375', document.getElementById('b7').value);
            formData.append('entry.824810926', document.getElementById('b8').value);
            formData.append('entry.1131995474', document.getElementById('b9').value);

            fetch('https://docs.google.com/forms/d/e/1FAIpQLSd6Ah71JE9D-0SWYAhTBVEjUQTeMklL69DVlxNfDmF16UiE1A/formResponse',


                {
                    method: 'POST',
                    mode: 'no-cors',
                    body: formData
                }).then(() => {
                    alert("‚úÖ Êèê‰∫§ÊàêÂäüÔºÅ");
                }).catch(err => {
                    console.error("‚ùå Êèê‰∫§Â§±Ë¥•", err);
                });
        }


        const SHEET_API_URL = 'https://script.google.com/macros/s/AKfycbzpQ8vTe8IBofsIog4TLZThhzReBvyb5SxZTqeYJSwUJW9jRo-AOUR4SZZxMWEggiud/exec'; // Áî®‰Ω†ÂàöÂàöÈÉ®ÁΩ≤ÁöÑÈìæÊé•

        function loadFriends() {
            fetch(SHEET_API_URL)
                .then(res => res.json())
                .then(data => {
                    const container = document.getElementById('friendList');
                    container.innerHTML = '';
                    data.forEach((entry, index) => {
                        const poem = `This is a world of ${entry.b1}...`; // ÁÆÄÁü≠ preview

                        const fullPoem = `Entity_qq_space#:${entry.b1} 

This is a world of ${entry.b2}.
not because they are invisible,
but because the intention of contour is never fixed‚Äî
it slips, softens, and spins within the folds of time.

Their bodies feel like sensations,
or the memory of a form that may have once existed.
In the corner of a room,
in the gaps between forgotten dust,
something begins to stir.

A ${entry.b3} that cannot be remembered is slowly forming.

You begin from what you believe is familiar:
perhaps a structure made of ${entry.b4},
it may ${entry.b5}, or it may also ${entry.b6}.

Its surface resembles ${entry.b7}, 
and within time it continues to ${entry.b8}.

But soon, it will move beyond your understanding‚Äî
it might split into another version of itself,
or collapse into endless folds,
or emit an echo from within, though no sound can be heard.

It does not exist in order to survive,
but to ${entry.b9}.`;

                        const div = document.createElement('div');
                        div.className = 'friend';
                        div.textContent = '(:‚óé)‚â°' + (index + 1);
                        div.onclick = () => openModal(fullPoem);
                        container.appendChild(div);
                    });
                })
                .catch(err => console.error("Âä†ËΩΩÂ§±Ë¥•", err));
        }

        function openModal(text) {
            document.querySelector('.story-modal .story-content').textContent = text;
            document.getElementById('storyModal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('storyModal').classList.add('hidden');
        }

        window.onload = loadFriends;


        // üëà  PDF 
        let pdfDoc = null,
            pageNum = 1,
            canvas = document.getElementById('pdfCanvas'),
            ctx = canvas.getContext('2d');

        const url = 'pdf.pdf'; // üëà ‰Ω†ÁöÑÊú¨Âú∞ PDF Ë∑ØÂæÑ

        function renderPage(num) {
            pdfDoc.getPage(num).then(function (page) {
                const viewport = page.getViewport({ scale: 1.5 });
                canvas.height = viewport.height;
                canvas.width = viewport.width;

                let renderContext = {
                    canvasContext: ctx,
                    viewport: viewport
                };
                page.render(renderContext);
                document.getElementById('pageNum').textContent = num;
            });
        }

        // Âä†ËΩΩ PDF
        function openPdfViewer() {
            document.getElementById('pdfModal').style.display = 'block';
            if (!pdfDoc) {
                pdfjsLib.getDocument(url).promise.then(function (pdf) {
                    pdfDoc = pdf;
                    document.getElementById('pageCount').textContent = pdf.numPages;
                    renderPage(pageNum);
                });
            } else {
                renderPage(pageNum);
            }
        }

        // ÊåâÈíÆÂäüËÉΩ
        document.getElementById('openPdfIcon').onclick = openPdfViewer;

        document.getElementById('closePdf').onclick = () => {
            document.getElementById('pdfModal').style.display = 'none';
        };

        document.getElementById('prevPage').onclick = () => {
            if (pageNum <= 1) return;
            pageNum--;
            renderPage(pageNum);
        };

        document.getElementById('nextPage').onclick = () => {
            if (pageNum >= pdfDoc.numPages) return;
            pageNum++;
            renderPage(pageNum);
        };

    </script>





</body>

</html>